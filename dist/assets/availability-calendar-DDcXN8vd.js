import{h as T,C as y,a as p,e as f,b as j,f as b,I as u,l as z}from"./index-DsOurtT6.js";import{r as x,j as e}from"./ui-he1BrmUV.js";import{C as L,f as d}from"./calendar-DVRN93qB.js";import{B as N}from"./badge-BH_9xXOh.js";import{C as B}from"./clock-oLX9UjW2.js";import{T as F}from"./trash-2-Dldhwx-o.js";import{S as I}from"./save-Z8zJ2vjL.js";import{f as v}from"./fr-Qfl_UVRO.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=T("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);function Q({readOnly:i=!1,initialAvailability:w=[],onSave:g}){const[a,C]=x.useState(new Date),[o,c]=x.useState(w.map(s=>({...s,date:typeof s.date=="string"?new Date(s.date):s.date}))),[l,n]=x.useState({start:"09:00",end:"17:00",rate:50}),h=s=>o.find(t=>d(t.date,"yyyy-MM-dd")===d(s,"yyyy-MM-dd")),M=()=>{if(!a)return;const s=h(a);c(s?t=>t.map(r=>d(r.date,"yyyy-MM-dd")===d(a,"yyyy-MM-dd")?{...r,slots:[...r.slots,{...l}]}:r):t=>[...t,{date:a,slots:[{...l}]}]),n({start:"09:00",end:"17:00",rate:50})},S=s=>{a&&c(t=>t.map(r=>d(r.date,"yyyy-MM-dd")===d(a,"yyyy-MM-dd")?{...r,slots:r.slots.filter((E,D)=>D!==s)}:r).filter(r=>r.slots.length>0))},m=a?h(a):null,k={available:o.map(s=>s.date)},A={available:"bg-green-100 text-green-900 font-semibold"};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(y,{className:"border-0 shadow-lg bg-gradient-to-br from-white to-blue-50",children:[e.jsx(p,{children:e.jsxs(f,{className:"flex items-center text-gray-800",children:[e.jsx(B,{className:"w-5 h-5 mr-2 text-blue-600"}),"Calendrier des disponibilités"]})}),e.jsxs(j,{children:[e.jsx(L,{mode:"single",selected:a,onSelect:C,locale:v,modifiers:k,modifiersClassNames:A,className:"rounded-lg border-0 shadow-inner bg-white p-4",disabled:i?void 0:s=>s<new Date}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("span",{className:"w-3 h-3 bg-green-100 border border-green-300 rounded inline-block mr-2"}),"Jours disponibles"]})})]})]}),e.jsxs(y,{className:"border-0 shadow-lg bg-gradient-to-br from-white to-purple-50",children:[e.jsx(p,{children:e.jsx(f,{className:"text-gray-800",children:a?`Créneaux du ${d(a,"dd MMMM yyyy",{locale:v})}`:"Sélectionnez une date"})}),e.jsxs(j,{className:"space-y-4",children:[m&&m.slots.length>0?e.jsx("div",{className:"space-y-3",children:m.slots.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(N,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[s.start," - ",s.end]}),e.jsxs(N,{className:"bg-green-100 text-green-800",children:[s.rate,"€/h"]})]}),!i&&e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>S(t),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:e.jsx(F,{className:"w-4 h-4"})})]},t))}):a?e.jsx("p",{className:"text-gray-500 text-center py-6 italic",children:"Aucun créneau défini pour cette date"}):e.jsx("p",{className:"text-gray-500 text-center py-6 italic",children:"Sélectionnez une date dans le calendrier"}),!i&&a&&e.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Ajouter un créneau"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Début"}),e.jsx(u,{type:"time",value:l.start,onChange:s=>n(t=>({...t,start:s.target.value})),className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fin"}),e.jsx(u,{type:"time",value:l.end,onChange:s=>n(t=>({...t,end:s.target.value})),className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tarif (€/heure)"}),e.jsx(u,{type:"number",min:"0",step:"0.01",value:l.rate,onChange:s=>n(t=>({...t,rate:parseFloat(s.target.value)||0})),className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs(b,{onClick:M,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white",disabled:!l.start||!l.end||l.start>=l.end,children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Ajouter le créneau"]})]}),!i&&g&&e.jsxs(b,{onClick:()=>g(o),className:"w-full bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Sauvegarder les disponibilités"]})]})]})]})}export{Q as A,K as L};
