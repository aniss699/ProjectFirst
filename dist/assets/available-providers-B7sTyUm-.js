import{r as j,j as e}from"./ui-he1BrmUV.js";import{u as P}from"./useQuery-tRgcQCc-.js";import{I as v,B as m,C as T,b as L,f as z,c as C,D as B,y as E,n as V,z as Z,o as $,q as H,L as u}from"./index-DQ5-uqq5.js";import{B as q}from"./badge-BV9J04az.js";import{C as G}from"./calendar-BpH_PJ6X.js";import{A as U,a as J,b as K}from"./avatar-oyyIp8NE.js";import{T as Q}from"./textarea-CV5Hd8y3.js";import{S as f,a as b,b as S,c as N,d as r}from"./select-CSQO1tgE.js";import{C as X}from"./categories-CJOmrs8V.js";import{F as Y}from"./filter-DvUlhl0x.js";import{C as k}from"./calendar-B9EkOJzI.js";import{S as _}from"./star-DgSGemXh.js";import{M as W}from"./map-pin-D_eOYWFj.js";import{C as O}from"./clock-2i7kAqQO.js";import{M as ee}from"./message-circle-Bc9qujHC.js";import{P as se}from"./phone-CMJ8lWHq.js";import"./vendor-D3F3s8fL.js";import"./en-US-oEpl4HuW.js";import"./chevron-left-B4Joq8_9.js";import"./index-BelvN6Su.js";import"./chevron-up-Xa8uXmGz.js";function De(){const[l,R]=j.useState(new Date),[i,x]=j.useState({category:"all",location:"",maxRate:"",availability:"today"}),[y,p]=j.useState({isOpen:!1,provider:null,selectedTimeSlot:""}),[n,d]=j.useState({date:"",timeSlot:"",duration:"1",description:"",budget:""}),{data:ae=[]}=P({queryKey:["/api/providers/available"]}),h=new Date,w=new Date(h);w.setDate(h.getDate()+1);const g=[{id:"1",name:"Sophie Martin",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",category:"design",location:"Paris",rating:4.9,hourlyRate:65,skills:["UI/UX Design","Figma","Adobe Creative"],responseTime:"< 1h",completedProjects:127,availability:[{date:h.toISOString().split("T")[0],timeSlots:["09:00-12:00","14:00-17:00"]},{date:w.toISOString().split("T")[0],timeSlots:["10:00-16:00"]}],lastSeen:"2024-07-26T10:00:00Z",memberSince:"2023-01-15T00:00:00Z"},{id:"2",name:"Thomas Dubois",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",category:"development",location:"Lyon",rating:4.8,hourlyRate:80,skills:["React","Node.js","TypeScript"],responseTime:"< 30min",completedProjects:89,availability:[{date:h.toISOString().split("T")[0],timeSlots:["08:00-12:00","13:00-18:00"]}],lastSeen:"2024-07-25T15:30:00Z",memberSince:"2022-05-20T00:00:00Z"},{id:"3",name:"Marie Leroy",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face",category:"marketing",location:"Marseille",rating:4.7,hourlyRate:55,skills:["SEO","Google Ads","Analytics"],responseTime:"< 2h",completedProjects:156,availability:[{date:h.toISOString().split("T")[0],timeSlots:["09:00-13:00"]},{date:w.toISOString().split("T")[0],timeSlots:["14:00-18:00"]}],lastSeen:"2024-07-26T09:00:00Z",memberSince:"2023-11-01T00:00:00Z"}].filter(s=>{if(i.category!=="all"&&s.category!==i.category||i.location&&!s.location.toLowerCase().includes(i.location.toLowerCase())||i.maxRate&&s.hourlyRate>parseInt(i.maxRate))return!1;if(i.availability==="today"){const t=new Date().toISOString().split("T")[0];return s.availability.some(c=>c.date===t)}return!0}),D=(s,t)=>{if(!t||isNaN(t.getTime()))return[];const c=t.toISOString().split("T")[0];return s.availability.find(a=>a.date===c)?.timeSlots||[]},I=l&&!isNaN(l.getTime())?l.toISOString().split("T")[0]:new Date().toISOString().split("T")[0],F=g.filter(s=>s.availability.some(t=>t.date===I)),A=(s,t)=>{const c=l&&!isNaN(l.getTime())?l.toISOString().split("T")[0]:new Date().toISOString().split("T")[0];p({isOpen:!0,provider:s,selectedTimeSlot:""}),d({date:c,timeSlot:"",duration:"1",description:"",budget:""})},M=()=>{console.log("R√©servation:",{provider:y.provider?.id,...n}),p({isOpen:!1,provider:null,selectedTimeSlot:""})};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Prestataires Disponibles"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Trouvez des professionnels disponibles imm√©diatement avec leurs cr√©neaux et tarifs"})]}),e.jsxs("div",{className:"grid lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-white/90 rounded-lg shadow-md border border-gray-200 p-4 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Y,{className:"w-4 h-4 text-blue-600"}),e.jsx("h3",{className:"text-md font-semibold text-gray-800",children:"Filtres"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Cat√©gorie"}),e.jsxs(f,{value:i.category,onValueChange:s=>x(t=>({...t,category:s})),children:[e.jsx(b,{className:"h-8 text-sm",children:e.jsx(S,{placeholder:"Toutes"})}),e.jsxs(N,{children:[e.jsx(r,{value:"all",children:"Toutes"}),X.map(s=>e.jsx(r,{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Lieu"}),e.jsx(v,{placeholder:"Ville...",value:i.location,onChange:s=>x(t=>({...t,location:s.target.value})),className:"h-8 text-sm"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Max ‚Ç¨/h"}),e.jsx(v,{type:"number",placeholder:"‚Ç¨",value:i.maxRate,onChange:s=>x(t=>({...t,maxRate:s.target.value})),className:"h-8 text-sm"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Dispo"}),e.jsxs(f,{value:i.availability,onValueChange:s=>x(t=>({...t,availability:s})),children:[e.jsx(b,{className:"h-8 text-sm",children:e.jsx(S,{})}),e.jsxs(N,{children:[e.jsx(r,{value:"today",children:"Aujourd'hui"}),e.jsx(r,{value:"week",children:"Semaine"}),e.jsx(r,{value:"all",children:"Toutes"})]})]})]})]}),e.jsx(m,{variant:"outline",size:"sm",className:"w-full mt-3 h-7 text-xs",onClick:()=>x({category:"all",location:"",maxRate:"",availability:"today"}),children:"Effacer"})]}),e.jsxs(T,{children:[e.jsx(L,{children:e.jsxs(z,{className:"flex items-center",children:[e.jsx(k,{className:"w-5 h-5 mr-2"}),"S√©lectionner une date"]})}),e.jsxs(C,{children:[e.jsx(G,{mode:"single",selected:l,onSelect:s=>s&&R(s),disabled:s=>s<new Date(new Date().setHours(0,0,0,0)),className:"rounded-md border"}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[F.length," prestataire(s) disponible(s) le ",l.toLocaleDateString("fr-FR")]})]})]})]}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-2xl font-bold",children:[g.length," prestataires trouv√©s"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Tri√©s par disponibilit√© et note"})]}),e.jsx("div",{className:"space-y-6",children:g.map(s=>{const t=D(s,new Date),c=D(s,l);return e.jsx(T,{className:"hover:shadow-lg transition-shadow",children:e.jsx(C,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4 mb-4 lg:mb-0",children:[e.jsxs(U,{className:"w-16 h-16",children:[e.jsx(J,{src:s.avatar,alt:s.name}),e.jsx(K,{children:s.name.split(" ").map(a=>a[0]).join("")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-sm font-medium ml-1",children:s.rating})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"w-4 h-4 mr-1"}),s.location]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),"R√©pond en ",s.responseTime]}),e.jsxs("div",{children:[s.completedProjects," projets"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.skills.map(a=>e.jsx(q,{variant:"secondary",className:"text-xs",children:a},a))}),e.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-2",children:[s.hourlyRate,"‚Ç¨/h"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Dernier vu: ",s.lastSeen?new Date(s.lastSeen).toLocaleDateString():"R√©cemment"]}),e.jsx("br",{}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Membre depuis ",s.memberSince?new Date(s.memberSince).getFullYear():"2024"]})]})]}),e.jsxs("div",{className:"lg:text-right space-y-3",children:[t.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-green-600 mb-1",children:"‚úÖ Disponible aujourd'hui"}),e.jsx("div",{className:"text-xs text-gray-600",children:t.join(", ")})]}),c.length>0&&l.toDateString()!==new Date().toDateString()&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-blue-600 mb-1",children:["üìÖ Disponible le ",l.toLocaleDateString("fr-FR")]}),e.jsx("div",{className:"text-xs text-gray-600",children:c.join(", ")})]}),e.jsxs("div",{className:"flex space-x-2 flex-wrap",children:[e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>window.location.href=`/messages?provider=${s.id}`,children:[e.jsx(ee,{className:"w-4 h-4 mr-1"}),"Message"]}),e.jsxs(m,{size:"sm",variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-50",onClick:()=>window.open(`tel:+33${Math.floor(Math.random()*1e9)}`,"_self"),children:[e.jsx(se,{className:"w-4 h-4 mr-1"}),"Contacter"]}),e.jsxs(B,{open:y.isOpen&&y.provider?.id===s.id,onOpenChange:a=>!a&&p({isOpen:!1,provider:null,selectedTimeSlot:""}),children:[e.jsx(E,{asChild:!0,children:e.jsxs(m,{size:"sm",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white",onClick:()=>A(s),children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),"R√©server"]})}),e.jsxs(V,{className:"max-w-md",children:[e.jsxs(Z,{children:[e.jsx($,{children:"R√©server un cr√©neau"}),e.jsxs(H,{children:["R√©servez un cr√©neau avec ",s.name]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"date",children:"Date"}),e.jsx(v,{id:"date",type:"date",value:n.date,onChange:a=>d(o=>({...o,date:a.target.value})),min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"timeSlot",children:"Cr√©neaux disponibles"}),e.jsxs(f,{value:n.timeSlot,onValueChange:a=>d(o=>({...o,timeSlot:a})),children:[e.jsx(b,{children:e.jsx(S,{placeholder:"S√©lectionner un cr√©neau"})}),e.jsx(N,{children:n.date&&D(s,new Date(n.date)).map(a=>e.jsx(r,{value:a,children:a},a))})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"duration",children:"Dur√©e (heures)"}),e.jsxs(f,{value:n.duration,onValueChange:a=>d(o=>({...o,duration:a})),children:[e.jsx(b,{children:e.jsx(S,{})}),e.jsxs(N,{children:[e.jsx(r,{value:"1",children:"1 heure"}),e.jsx(r,{value:"2",children:"2 heures"}),e.jsx(r,{value:"4",children:"4 heures"}),e.jsx(r,{value:"8",children:"Journ√©e compl√®te"})]})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"budget",children:"Budget estim√©"}),e.jsx(v,{id:"budget",type:"number",placeholder:`${s.hourlyRate*parseInt(n.duration)}‚Ç¨`,value:n.budget,onChange:a=>d(o=>({...o,budget:a.target.value}))})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"description",children:"Description du projet"}),e.jsx(Q,{id:"description",placeholder:"D√©crivez bri√®vement votre projet...",value:n.description,onChange:a=>d(o=>({...o,description:a.target.value}))})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(m,{variant:"outline",className:"flex-1",onClick:()=>p({isOpen:!1,provider:null,selectedTimeSlot:""}),children:"Annuler"}),e.jsx(m,{className:"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",onClick:M,children:"Confirmer la r√©servation"})]})]})]})]})]})]})]})})},s.id)})}),g.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(O,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun prestataire disponible"}),e.jsx("p",{className:"text-gray-600",children:"Essayez de modifier vos crit√®res de recherche"})]})]})]})]})}export{De as default};
