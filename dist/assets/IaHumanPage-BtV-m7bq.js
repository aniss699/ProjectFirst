import{r as d,j as e}from"./ui-he1BrmUV.js";import{u as w,F as C,a as I,b as F,c as S,d as B,e as A,t as z}from"./types-BLPc7G2H.js";import{j as D,C as x,b as f,f as b,c as p,B as l,e as h}from"./index-CVhY-X5t.js";import{T as E}from"./textarea-CtIczNnM.js";import{s as v}from"./services-B9yTTPPJ.js";import{i as P}from"./services-CCmatvXw.js";import{B as u}from"./brain-BKPnblf-.js";import{L as N}from"./loader-circle-CztCo2cf.js";import{S as T}from"./square-pen-CF8SQzRY.js";import{S as H}from"./send-BlnDGq2V.js";import"./vendor-D3F3s8fL.js";function W(){const[n,c]=d.useState("input"),[t,i]=d.useState(!1),[a,j]=d.useState(null),{toast:o}=D(),m=w({resolver:z(P),defaultValues:{description:""}}),g=async s=>{i(!0);try{const r=await v.aiDraftBrief(s.description);j(r),c("draft")}catch{o({title:"Erreur",description:"Impossible de g√©n√©rer le brief IA. R√©essayez.",variant:"destructive"})}finally{i(!1)}},y=async()=>{if(a){i(!0);try{(await v.createIaHumanJob(a)).success&&(c("done"),o({title:"Brief envoy√© aux experts !",description:"Vous recevrez des propositions d√©taill√©es sous peu."}))}catch{o({title:"Erreur",description:"Impossible d'envoyer aux experts. R√©essayez.",variant:"destructive"})}finally{i(!1)}}},k=()=>{c("input"),j(null)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 py-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-block p-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full mb-4",children:e.jsx(u,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"IA + Humain"}),e.jsx("p",{className:"text-gray-600",children:"Notre IA analyse votre besoin et le transforme en brief expert"})]}),n==="input"&&e.jsxs(x,{children:[e.jsx(f,{children:e.jsxs(b,{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{children:"D√©crivez votre projet"})]})}),e.jsx(p,{children:e.jsx(C,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(g),className:"space-y-6",children:[e.jsx(I,{control:m.control,name:"description",render:({field:s})=>e.jsxs(F,{children:[e.jsx(S,{children:"D√©crivez votre besoin en d√©tail"}),e.jsx(B,{children:e.jsx(E,{placeholder:"D√©crivez votre projet, vos objectifs, contraintes, d√©lais... Plus vous √™tes pr√©cis, plus l'IA pourra vous aider !",className:"min-h-[150px]",...s})}),e.jsx(A,{})]})}),e.jsx(l,{type:"submit",disabled:t,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 py-3 text-lg font-semibold",children:t?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-5 h-5 mr-2 animate-spin"}),"L'IA analyse votre projet..."]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"w-5 h-5 mr-2"}),"G√©n√©rer le brief avec l'IA"]})})]})})})]}),n==="draft"&&a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x,{children:[e.jsx(f,{children:e.jsxs(b,{className:"flex items-center space-x-2",children:[e.jsx(h,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{children:"Brief IA g√©n√©r√©"})]})}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"üìã P√©rim√®tre du projet"}),e.jsx("p",{className:"text-gray-700 bg-gray-50 p-4 rounded-lg",children:a.scope})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"üéØ Livrables attendus"}),e.jsx("ul",{className:"space-y-2",children:a.deliverables.map((s,r)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(h,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:s})]},r))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"‚ö†Ô∏è Risques identifi√©s"}),e.jsx("ul",{className:"space-y-2",children:a.risks.map((s,r)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:s})]},r))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"‚úÖ Checklist validation"}),e.jsx("ul",{className:"space-y-2",children:a.checklist.map((s,r)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("input",{type:"checkbox",className:"mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:s})]},r))})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(l,{onClick:k,variant:"outline",className:"flex-1",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Modifier le brief"]}),e.jsx(l,{onClick:y,disabled:t,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:t?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-5 h-5 mr-2 animate-spin"}),"Envoi en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-5 h-5 mr-2"}),"Valider & envoyer aux experts"]})})]})]}),n==="done"&&e.jsx(x,{children:e.jsxs(p,{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block p-4 bg-green-100 rounded-full mb-4",children:e.jsx(h,{className:"w-12 h-12 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Brief envoy√© avec succ√®s !"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Notre √©quipe d'experts va analyser votre brief IA et vous envoyer des propositions personnalis√©es."}),e.jsx(l,{onClick:()=>window.location.reload(),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:"Cr√©er un nouveau brief"})]})})]})})}export{W as default};
