import{r as j,j as e}from"./ui-he1BrmUV.js";import{u as z}from"./useQuery-BgA6SuIB.js";import{B as m,L as c,I as v,C as T,b as E,f as V,c as k,D as Z,A as $,o as H,E as q,q as G,r as U}from"./index-mploPbUC.js";import{B as W}from"./badge-BZtuan3h.js";import{C as J}from"./calendar-D2b3-lVW.js";import{A as K,a as Q,b as X}from"./avatar-B_N0D_5L.js";import{T as Y}from"./textarea-CV6p-MxT.js";import{S as f,a as b,b as S,c as N,d as r}from"./select-bp37irb_.js";import{C as _}from"./categories-CJOmrs8V.js";import{F as R}from"./filter-PQ-gyzbN.js";import{C as O}from"./calendar-CE871ktK.js";import{S as ee}from"./star-CBmt4zNk.js";import{M as se}from"./map-pin-DIKp9Ztf.js";import{C as F}from"./clock-CB_yXakG.js";import{M as te}from"./message-circle-CmOxN9Mm.js";import{P as ae}from"./phone-DHNuFmw2.js";import"./vendor-D3F3s8fL.js";import"./en-US-oEpl4HuW.js";import"./chevron-left-tF_6vPur.js";import"./index-BelvN6Su.js";import"./chevron-up-DMihuY3n.js";function Te(){const[l,I]=j.useState(new Date),[y,A]=j.useState(!1),[i,h]=j.useState({category:"all",location:"",maxRate:"",availability:"today"}),[w,g]=j.useState({isOpen:!1,provider:null,selectedTimeSlot:""}),[n,x]=j.useState({date:"",timeSlot:"",duration:"1",description:"",budget:""}),{data:le=[]}=z({queryKey:["/api/providers/available"]}),u=new Date,D=new Date(u);D.setDate(u.getDate()+1);const p=[{id:"1",name:"Sophie Martin",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",category:"design",location:"Paris",rating:4.9,hourlyRate:65,skills:["UI/UX Design","Figma","Adobe Creative"],responseTime:"< 1h",completedProjects:127,availability:[{date:u.toISOString().split("T")[0],timeSlots:["09:00-12:00","14:00-17:00"]},{date:D.toISOString().split("T")[0],timeSlots:["10:00-16:00"]}],lastSeen:"2024-07-26T10:00:00Z",memberSince:"2023-01-15T00:00:00Z"},{id:"2",name:"Thomas Dubois",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",category:"development",location:"Lyon",rating:4.8,hourlyRate:80,skills:["React","Node.js","TypeScript"],responseTime:"< 30min",completedProjects:89,availability:[{date:u.toISOString().split("T")[0],timeSlots:["08:00-12:00","13:00-18:00"]}],lastSeen:"2024-07-25T15:30:00Z",memberSince:"2022-05-20T00:00:00Z"},{id:"3",name:"Marie Leroy",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face",category:"marketing",location:"Marseille",rating:4.7,hourlyRate:55,skills:["SEO","Google Ads","Analytics"],responseTime:"< 2h",completedProjects:156,availability:[{date:u.toISOString().split("T")[0],timeSlots:["09:00-13:00"]},{date:D.toISOString().split("T")[0],timeSlots:["14:00-18:00"]}],lastSeen:"2024-07-26T09:00:00Z",memberSince:"2023-11-01T00:00:00Z"}].filter(s=>{if(i.category!=="all"&&s.category!==i.category||i.location&&!s.location.toLowerCase().includes(i.location.toLowerCase())||i.maxRate&&s.hourlyRate>parseInt(i.maxRate))return!1;if(i.availability==="today"){const a=new Date().toISOString().split("T")[0];return s.availability.some(d=>d.date===a)}return!0}),C=(s,a)=>{if(!a||isNaN(a.getTime()))return[];const d=a.toISOString().split("T")[0];return s.availability.find(t=>t.date===d)?.timeSlots||[]},M=l&&!isNaN(l.getTime())?l.toISOString().split("T")[0]:new Date().toISOString().split("T")[0],P=p.filter(s=>s.availability.some(a=>a.date===M)),L=(s,a)=>{const d=l&&!isNaN(l.getTime())?l.toISOString().split("T")[0]:new Date().toISOString().split("T")[0];g({isOpen:!0,provider:s,selectedTimeSlot:""}),x({date:d,timeSlot:"",duration:"1",description:"",budget:""})},B=()=>{console.log("R√©servation:",{provider:w.provider?.id,...n}),g({isOpen:!1,provider:null,selectedTimeSlot:""})};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Prestataires Disponibles"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Trouvez des professionnels disponibles imm√©diatement avec leurs cr√©neaux et tarifs"})]}),e.jsxs("div",{className:"grid lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs(m,{onClick:()=>A(!y),variant:"outline",className:"w-full gap-2",children:[e.jsx(R,{className:"w-4 h-4"}),"Filtres",y?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),y&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(R,{className:"w-4 h-4 text-blue-600"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Filtres de recherche"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(c,{className:"text-xs font-medium text-gray-600 mb-1 block",children:"Cat√©gorie"}),e.jsxs(f,{value:i.category,onValueChange:s=>h(a=>({...a,category:s})),children:[e.jsx(b,{className:"h-8",children:e.jsx(S,{placeholder:"Toutes les cat√©gories"})}),e.jsxs(N,{children:[e.jsx(r,{value:"all",children:"Toutes les cat√©gories"}),_.map(s=>e.jsx(r,{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-xs font-medium text-gray-600 mb-1 block",children:"Localisation"}),e.jsx(v,{placeholder:"Ville, r√©gion...",value:i.location,onChange:s=>h(a=>({...a,location:s.target.value})),className:"h-8"})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-xs font-medium text-gray-600 mb-1 block",children:"Tarif maximum"}),e.jsx(v,{type:"number",placeholder:"‚Ç¨/heure",value:i.maxRate,onChange:s=>h(a=>({...a,maxRate:s.target.value})),className:"h-8"})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-xs font-medium text-gray-600 mb-1 block",children:"Disponibilit√©"}),e.jsxs(f,{value:i.availability,onValueChange:s=>h(a=>({...a,availability:s})),children:[e.jsx(b,{className:"h-8",children:e.jsx(S,{placeholder:"P√©riode"})}),e.jsxs(N,{children:[e.jsx(r,{value:"today",children:"Aujourd'hui"}),e.jsx(r,{value:"week",children:"Cette semaine"}),e.jsx(r,{value:"all",children:"Toutes les disponibilit√©s"})]})]})]}),e.jsx(m,{variant:"outline",size:"sm",className:"w-full h-8",onClick:()=>h({category:"all",location:"",maxRate:"",availability:"today"}),children:"R√©initialiser les filtres"})]})]}),e.jsxs(T,{children:[e.jsx(E,{children:e.jsxs(V,{className:"flex items-center",children:[e.jsx(O,{className:"w-5 h-5 mr-2"}),"S√©lectionner une date"]})}),e.jsxs(k,{children:[e.jsx(J,{mode:"single",selected:l,onSelect:s=>s&&I(s),disabled:s=>s<new Date(new Date().setHours(0,0,0,0)),className:"rounded-md border"}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[P.length," prestataire(s) disponible(s) le ",l.toLocaleDateString("fr-FR")]})]})]})]}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-2xl font-bold",children:[p.length," prestataires trouv√©s"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Tri√©s par disponibilit√© et note"})]}),e.jsx("div",{className:"space-y-6",children:p.map(s=>{const a=C(s,new Date),d=C(s,l);return e.jsx(T,{className:"hover:shadow-lg transition-shadow",children:e.jsx(k,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4 mb-4 lg:mb-0",children:[e.jsxs(K,{className:"w-16 h-16",children:[e.jsx(Q,{src:s.avatar,alt:s.name}),e.jsx(X,{children:s.name.split(" ").map(t=>t[0]).join("")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ee,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-sm font-medium ml-1",children:s.rating})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(se,{className:"w-4 h-4 mr-1"}),s.location]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"w-4 h-4 mr-1"}),"R√©pond en ",s.responseTime]}),e.jsxs("div",{children:[s.completedProjects," projets"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.skills.map(t=>e.jsx(W,{variant:"secondary",className:"text-xs",children:t},t))}),e.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-2",children:[s.hourlyRate,"‚Ç¨/h"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Dernier vu: ",s.lastSeen?new Date(s.lastSeen).toLocaleDateString():"R√©cemment"]}),e.jsx("br",{}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Membre depuis ",s.memberSince?new Date(s.memberSince).getFullYear():"2024"]})]})]}),e.jsxs("div",{className:"lg:text-right space-y-3",children:[a.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-green-600 mb-1",children:"‚úÖ Disponible aujourd'hui"}),e.jsx("div",{className:"text-xs text-gray-600",children:a.join(", ")})]}),d.length>0&&l.toDateString()!==new Date().toDateString()&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-blue-600 mb-1",children:["üìÖ Disponible le ",l.toLocaleDateString("fr-FR")]}),e.jsx("div",{className:"text-xs text-gray-600",children:d.join(", ")})]}),e.jsxs("div",{className:"flex space-x-2 flex-wrap",children:[e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>window.location.href=`/messages?provider=${s.id}`,children:[e.jsx(te,{className:"w-4 h-4 mr-1"}),"Message"]}),e.jsxs(m,{size:"sm",variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-50",onClick:()=>window.open(`tel:+33${Math.floor(Math.random()*1e9)}`,"_self"),children:[e.jsx(ae,{className:"w-4 h-4 mr-1"}),"Contacter"]}),e.jsxs(Z,{open:w.isOpen&&w.provider?.id===s.id,onOpenChange:t=>!t&&g({isOpen:!1,provider:null,selectedTimeSlot:""}),children:[e.jsx($,{asChild:!0,children:e.jsxs(m,{size:"sm",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white",onClick:()=>L(s),children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),"R√©server"]})}),e.jsxs(H,{className:"max-w-md",children:[e.jsxs(q,{children:[e.jsx(G,{children:"R√©server un cr√©neau"}),e.jsxs(U,{children:["R√©servez un cr√©neau avec ",s.name]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"date",children:"Date"}),e.jsx(v,{id:"date",type:"date",value:n.date,onChange:t=>x(o=>({...o,date:t.target.value})),min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"timeSlot",children:"Cr√©neaux disponibles"}),e.jsxs(f,{value:n.timeSlot,onValueChange:t=>x(o=>({...o,timeSlot:t})),children:[e.jsx(b,{children:e.jsx(S,{placeholder:"S√©lectionner un cr√©neau"})}),e.jsx(N,{children:n.date&&C(s,new Date(n.date)).map(t=>e.jsx(r,{value:t,children:t},t))})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"duration",children:"Dur√©e (heures)"}),e.jsxs(f,{value:n.duration,onValueChange:t=>x(o=>({...o,duration:t})),children:[e.jsx(b,{children:e.jsx(S,{})}),e.jsxs(N,{children:[e.jsx(r,{value:"1",children:"1 heure"}),e.jsx(r,{value:"2",children:"2 heures"}),e.jsx(r,{value:"4",children:"4 heures"}),e.jsx(r,{value:"8",children:"Journ√©e compl√®te"})]})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"budget",children:"Budget estim√©"}),e.jsx(v,{id:"budget",type:"number",placeholder:`${s.hourlyRate*parseInt(n.duration)}‚Ç¨`,value:n.budget,onChange:t=>x(o=>({...o,budget:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"description",children:"Description du projet"}),e.jsx(Y,{id:"description",placeholder:"D√©crivez bri√®vement votre projet...",value:n.description,onChange:t=>x(o=>({...o,description:t.target.value}))})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(m,{variant:"outline",className:"flex-1",onClick:()=>g({isOpen:!1,provider:null,selectedTimeSlot:""}),children:"Annuler"}),e.jsx(m,{className:"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",onClick:B,children:"Confirmer la r√©servation"})]})]})]})]})]})]})]})})},s.id)})}),p.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(F,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun prestataire disponible"}),e.jsx("p",{className:"text-gray-600",children:"Essayez de modifier vos crit√®res de recherche"})]})]})]})]})}export{Te as default};
