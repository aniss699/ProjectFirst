import{r as x,j as e}from"./ui-he1BrmUV.js";import{u as Y,t as Z,o as k,F as $,a as n,b as i,c as l,d as o,e as c,g as ee,s as d,n as C,h as se}from"./types-DSRNxly7.js";import{j as te,B as u,U as ae,m as V,C as y,b as M,f as q,c as w,I as m}from"./index-b2aTp-p6.js";import{T as B}from"./textarea-Ybb3YL02.js";import{S as T,a as D,b as E,c as P,d as v}from"./select-BOMeOmvU.js";import{B as R}from"./badge-23_pUxyL.js";import{S as re}from"./switch-CNGO38Ub.js";import{G as I}from"./graduation-cap-Cu7wKEhP.js";import{S as ne}from"./star-DeKaCeh9.js";import{M as G}from"./map-pin-BdOE1fwQ.js";import{C as ie}from"./calendar-D6LDcN0e.js";import{E as le}from"./euro-BFAT7dPc.js";import{C as oe}from"./clock-Cja-tQQG.js";import{L as ce}from"./loader-circle-B1BbgE_7.js";import"./vendor-D3F3s8fL.js";import"./index-BelvN6Su.js";import"./chevron-up-da-QnYtv.js";const de=k({subject:d().min(1,"Veuillez sélectionner un domaine"),title:d().min(5,"Le titre doit faire au moins 5 caractères"),description:d().min(20,"La description doit faire au moins 20 caractères"),level:d().min(1,"Veuillez sélectionner un niveau"),maxStudents:C().min(2).max(20),pricePerStudent:C().min(10,"Le prix minimum est de 10€"),duration:C().min(30,"Durée minimum 30 minutes"),location:d().min(1,"La localisation est requise"),materials:d().optional(),timeSlots:ee(k({date:d(),time:d(),available:se()})).min(1,"Ajoutez au moins un créneau")}),O=["Langues (Anglais, Espagnol, etc.)","Informatique & Programmation","Marketing Digital","Design & Créativité","Musique & Arts","Cuisine & Gastronomie","Sport & Fitness","Développement Personnel","Mathématiques & Sciences","Business & Entrepreneuriat"],me=["Débutant","Intermédiaire","Avancé","Tous niveaux"];function Pe(){const[b,N]=x.useState("browse"),[A,F]=x.useState(!1),[U,J]=x.useState([]),[h,H]=x.useState(""),{toast:j}=te(),a=Y({resolver:Z(de),defaultValues:{subject:"",title:"",description:"",level:"",maxStudents:8,pricePerStudent:25,duration:90,location:"",materials:"",timeSlots:[]}}),[p,g]=x.useState([]);x.useEffect(()=>{z()},[h]);const z=async()=>{try{const s=[{id:1,teacherName:"Sophie Martin",rating:4.8,title:"Anglais conversationnel intensif",subject:"Langues (Anglais, Espagnol, etc.)",level:"Intermédiaire",pricePerStudent:30,duration:120,maxStudents:6,studentsEnrolled:4,nextSlot:"2024-02-15T10:00:00",location:"Paris 15ème",description:"Améliorez votre anglais oral dans une ambiance conviviale"},{id:2,teacherName:"Marc Dubois",rating:4.9,title:"JavaScript pour débutants",subject:"Informatique & Programmation",level:"Débutant",pricePerStudent:35,duration:180,maxStudents:8,studentsEnrolled:3,nextSlot:"2024-02-16T14:00:00",location:"Lyon Centre",description:"Apprenez les bases du JavaScript en petit groupe"}];J(h?s.filter(t=>t.subject===h):s)}catch(s){console.error("Erreur lors du chargement des cours:",s)}},_=()=>{const s=new Date;s.setDate(s.getDate()+1);const t=s.toISOString().split("T")[0];g(r=>[...r,{date:t,time:"10:00",available:!0}])},K=s=>{g(t=>t.filter((r,S)=>S!==s))},f=(s,t,r)=>{g(S=>S.map((L,X)=>X===s?{...L,[t]:r}:L))},Q=async s=>{F(!0);try{const t={...s,timeSlots:p};await new Promise(r=>setTimeout(r,2e3)),j({title:"Cours collectif créé !",description:"Votre cours est maintenant visible par tous les élèves intéressés."}),a.reset(),g([]),N("browse")}catch{j({title:"Erreur",description:"Impossible de créer le cours. Réessayez.",variant:"destructive"})}finally{F(!1)}},W=async s=>{try{await new Promise(t=>setTimeout(t,500)),j({title:"Inscription réussie !",description:"Vous êtes maintenant inscrit à ce cours."}),z()}catch{j({title:"Erreur",description:"Impossible de s'inscrire. Réessayez.",variant:"destructive"})}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 to-teal-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-block p-4 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-full mb-4",children:e.jsx(I,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Cours Collectifs"}),e.jsx("p",{className:"text-gray-600",children:"Apprenez ensemble, progressez plus vite"})]}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"bg-white rounded-lg p-1 shadow-md",children:[e.jsxs(u,{variant:b==="browse"?"default":"ghost",onClick:()=>N("browse"),className:"rounded-md",children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"Trouver un cours"]}),e.jsxs(u,{variant:b==="create"?"default":"ghost",onClick:()=>N("create"),className:"rounded-md",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Proposer un cours"]})]})}),b==="browse"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(y,{children:[e.jsx(M,{children:e.jsx(q,{children:"Filtrer les cours"})}),e.jsx(w,{children:e.jsxs(T,{onValueChange:H,value:h,children:[e.jsx(D,{children:e.jsx(E,{placeholder:"Tous les domaines"})}),e.jsxs(P,{children:[e.jsx(v,{value:"",children:"Tous les domaines"}),O.map(s=>e.jsx(v,{value:s,children:s},s))]})]})})]}),e.jsx("div",{className:"grid gap-6",children:U.map(s=>e.jsx(y,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(w,{className:"p-6",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:s.title}),e.jsx(R,{variant:"outline",children:s.level})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(V,{className:"w-4 h-4"}),s.teacherName]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ne,{className:"w-4 h-4 text-yellow-500"}),s.rating]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"w-4 h-4"}),s.location]})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-semibold text-emerald-600",children:[s.pricePerStudent,"€"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"par élève"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-semibold",children:[s.duration,"min"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"durée"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-semibold",children:[s.studentsEnrolled,"/",s.maxStudents]}),e.jsx("div",{className:"text-xs text-gray-500",children:"inscrits"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:new Date(s.nextSlot).toLocaleDateString("fr-FR")}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(s.nextSlot).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(R,{variant:s.studentsEnrolled<s.maxStudents?"default":"secondary",className:s.studentsEnrolled<s.maxStudents?"bg-green-500":"",children:s.studentsEnrolled<s.maxStudents?"Places disponibles":"Complet"}),e.jsxs(u,{onClick:()=>W(s.id),disabled:s.studentsEnrolled>=s.maxStudents,className:"bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600",children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"S'inscrire"]})]})]})},s.id))})]}):e.jsxs(y,{children:[e.jsx(M,{children:e.jsxs(q,{className:"flex items-center space-x-2",children:[e.jsx(I,{className:"w-5 h-5 text-emerald-600"}),e.jsx("span",{children:"Proposer un cours collectif"})]})}),e.jsx(w,{children:e.jsx($,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(Q),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{control:a.control,name:"subject",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Domaine d'enseignement"}),e.jsxs(T,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(o,{children:e.jsx(D,{children:e.jsx(E,{placeholder:"Sélectionnez un domaine"})})}),e.jsx(P,{children:O.map(t=>e.jsx(v,{value:t,children:t},t))})]}),e.jsx(c,{})]})}),e.jsx(n,{control:a.control,name:"level",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Niveau"}),e.jsxs(T,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(o,{children:e.jsx(D,{children:e.jsx(E,{placeholder:"Sélectionnez le niveau"})})}),e.jsx(P,{children:me.map(t=>e.jsx(v,{value:t,children:t},t))})]}),e.jsx(c,{})]})})]}),e.jsx(n,{control:a.control,name:"title",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Titre du cours"}),e.jsx(o,{children:e.jsx(m,{placeholder:"Ex: Anglais conversationnel pour le business",...s})}),e.jsx(c,{})]})}),e.jsx(n,{control:a.control,name:"description",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Description du cours"}),e.jsx(o,{children:e.jsx(B,{placeholder:"Décrivez le contenu, les objectifs, votre méthode...",className:"min-h-[120px]",...s})}),e.jsx(c,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(n,{control:a.control,name:"maxStudents",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Nombre max d'élèves"}),e.jsx(o,{children:e.jsx(m,{type:"number",min:2,max:20,placeholder:"8",...s,onChange:t=>s.onChange(Number(t.target.value))})}),e.jsx(c,{})]})}),e.jsx(n,{control:a.control,name:"pricePerStudent",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Prix par élève (€)"}),e.jsx(o,{children:e.jsxs("div",{className:"relative",children:[e.jsx(le,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(m,{type:"number",min:10,placeholder:"25",className:"pl-10",...s,onChange:t=>s.onChange(Number(t.target.value))})]})}),e.jsx(c,{})]})}),e.jsx(n,{control:a.control,name:"duration",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Durée (minutes)"}),e.jsx(o,{children:e.jsx(m,{type:"number",min:30,placeholder:"90",...s,onChange:t=>s.onChange(Number(t.target.value))})}),e.jsx(c,{})]})})]}),e.jsx(n,{control:a.control,name:"location",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Lieu du cours"}),e.jsx(o,{children:e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(m,{placeholder:"Paris, Lyon, ou en visio...",className:"pl-10",...s})]})}),e.jsx(c,{})]})}),e.jsx(n,{control:a.control,name:"materials",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Matériel requis (optionnel)"}),e.jsx(o,{children:e.jsx(B,{placeholder:"Ordinateur portable, cahier, aucun matériel spécifique...",className:"min-h-[80px]",...s})}),e.jsx(c,{})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Créneaux proposés"}),e.jsxs(u,{type:"button",onClick:_,variant:"outline",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Ajouter un créneau"]})]}),p.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-3",children:[e.jsx(m,{type:"date",value:s.date,onChange:r=>f(t,"date",r.target.value),min:new Date().toISOString().split("T")[0]}),e.jsx(m,{type:"time",value:s.time,onChange:r=>f(t,"time",r.target.value)}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{checked:s.available,onCheckedChange:r=>f(t,"available",r)}),e.jsx("span",{className:"text-sm",children:"Disponible"})]})]}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>K(t),className:"text-red-500 hover:text-red-700",children:"Supprimer"})]},t)),p.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Aucun créneau ajouté. Cliquez sur "Ajouter un créneau" pour commencer.'})]}),e.jsx(u,{type:"submit",disabled:A||p.length===0,className:"w-full bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 py-3 text-lg font-semibold",children:A?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"w-5 h-5 mr-2 animate-spin"}),"Création en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-5 h-5 mr-2"}),"Créer le cours collectif"]})})]})})})]})]})})}export{Pe as default};
