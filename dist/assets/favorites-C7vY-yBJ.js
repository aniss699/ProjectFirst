import{r as p,j as e}from"./ui-he1BrmUV.js";import{u as g,g as u,B as a,N as w,H as c,C as y,b,f as C,m as k,c as A}from"./index-D_dD4Ri5.js";import{u as F}from"./favorites-P8kfanov.js";import{B as d}from"./badge-BlpPfjyy.js";import{A as o,a as n}from"./alert-DdTShczj.js";import{C as h}from"./circle-alert-g-hDsm83.js";import{R as j}from"./refresh-cw-B9zkayde.js";import{T as R}from"./trash-2-E8bzBdiy.js";import{C as z}from"./calendar-CC6AfzZE.js";import{E}from"./euro-BAZXpxR1.js";import{M as B}from"./map-pin-Bo5i2wxV.js";import"./vendor-D3F3s8fL.js";import"./services-B9yTTPPJ.js";const I=()=>{const[,r]=g(),{user:t}=u(),{favorites:i,loading:f,error:m,loadFavorites:l,removeFromFavorites:N}=F();p.useEffect(()=>{t&&l()},[t,l]);const x=async s=>{await N(s)},v=s=>{r(`/marketplace?highlight=${s}`)};return t?f?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(j,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Chargement de vos favoris..."})]})}):m?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:e.jsxs(o,{variant:"destructive",className:"max-w-md",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx(n,{children:m}),e.jsxs(a,{onClick:l,className:"mt-4 w-full",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Réessayer"]})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-between h-16",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(a,{variant:"ghost",onClick:()=>r("/feed"),className:"flex items-center",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Retour au flux"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{className:"w-6 h-6 text-red-500"}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Mes favoris"}),e.jsx(d,{variant:"secondary",className:"ml-2",children:i.length})]})]})})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(c,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Aucun favori pour le moment"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Explorez le flux et ajoutez des annonces à vos favoris pour les retrouver ici."}),e.jsx(a,{onClick:()=>r("/feed"),children:"Découvrir des annonces"})]}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map(s=>e.jsxs(y,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(b,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(C,{className:"text-lg line-clamp-2",children:s.title}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>x(s.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:e.jsx(R,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),s.client_name||"Client anonyme"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"w-4 h-4 mr-1"}),new Date(s.created_at).toLocaleDateString("fr-FR")]})]})]}),e.jsxs(A,{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-700 line-clamp-3",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"font-semibold text-green-600",children:s.budget?`${s.budget}€`:"Budget à négocier"})]}),s.location&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(B,{className:"w-4 h-4 mr-1"}),s.location]})]}),s.category&&e.jsx(d,{variant:"outline",children:s.category}),e.jsxs("div",{className:"flex space-x-2 pt-2",children:[e.jsx(a,{size:"sm",onClick:()=>v(s.id),className:"flex-1",children:"Voir l'annonce"}),e.jsx(a,{variant:"outline",size:"sm",onClick:()=>x(s.id),className:"text-red-500 hover:text-red-700 border-red-200 hover:border-red-300",children:e.jsx(c,{className:"w-4 h-4 fill-red-500"})})]})]})]},s.id))})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:e.jsxs(o,{className:"max-w-md",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx(n,{children:"Vous devez être connecté pour voir vos favoris."}),e.jsx(a,{onClick:()=>r("/login"),className:"mt-4 w-full",children:"Se connecter"})]})})};export{I as default};
