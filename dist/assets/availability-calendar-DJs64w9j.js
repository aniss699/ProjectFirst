import{r as b,j as e}from"./ui-he1BrmUV.js";import{C as T,f as d}from"./calendar-DAWf2I3a.js";import{C as y,a as p,i as f,b as j,B as u,I as x,P as B}from"./index-COtURg7L.js";import{B as N}from"./badge-fv_Kl4nq.js";import{C as z}from"./clock-DXxmuCtW.js";import{T as F}from"./trash-2-j91uvvg3.js";import{S as E}from"./save-DZzCAKR5.js";import{f as v}from"./fr-Qfl_UVRO.js";function K({readOnly:i=!1,initialAvailability:w=[],onSave:g}){const[r,C]=b.useState(new Date),[o,c]=b.useState(w.map(s=>({...s,date:typeof s.date=="string"?new Date(s.date):s.date}))),[l,n]=b.useState({start:"09:00",end:"17:00",rate:50}),h=s=>o.find(t=>d(t.date,"yyyy-MM-dd")===d(s,"yyyy-MM-dd")),M=()=>{if(!r)return;const s=h(r);c(s?t=>t.map(a=>d(a.date,"yyyy-MM-dd")===d(r,"yyyy-MM-dd")?{...a,slots:[...a.slots,{...l}]}:a):t=>[...t,{date:r,slots:[{...l}]}]),n({start:"09:00",end:"17:00",rate:50})},S=s=>{r&&c(t=>t.map(a=>d(a.date,"yyyy-MM-dd")===d(r,"yyyy-MM-dd")?{...a,slots:a.slots.filter((I,D)=>D!==s)}:a).filter(a=>a.slots.length>0))},m=r?h(r):null,A={available:o.map(s=>s.date)},k={available:"bg-green-100 text-green-900 font-semibold"};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(y,{className:"border-0 shadow-lg bg-gradient-to-br from-white to-blue-50",children:[e.jsx(p,{children:e.jsxs(f,{className:"flex items-center text-gray-800",children:[e.jsx(z,{className:"w-5 h-5 mr-2 text-blue-600"}),"Calendrier des disponibilités"]})}),e.jsxs(j,{children:[e.jsx(T,{mode:"single",selected:r,onSelect:C,locale:v,modifiers:A,modifiersClassNames:k,className:"rounded-lg border-0 shadow-inner bg-white p-4",disabled:i?void 0:s=>s<new Date}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("span",{className:"w-3 h-3 bg-green-100 border border-green-300 rounded inline-block mr-2"}),"Jours disponibles"]})})]})]}),e.jsxs(y,{className:"border-0 shadow-lg bg-gradient-to-br from-white to-purple-50",children:[e.jsx(p,{children:e.jsx(f,{className:"text-gray-800",children:r?`Créneaux du ${d(r,"dd MMMM yyyy",{locale:v})}`:"Sélectionnez une date"})}),e.jsxs(j,{className:"space-y-4",children:[m&&m.slots.length>0?e.jsx("div",{className:"space-y-3",children:m.slots.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(N,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[s.start," - ",s.end]}),e.jsxs(N,{className:"bg-green-100 text-green-800",children:[s.rate,"€/h"]})]}),!i&&e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>S(t),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:e.jsx(F,{className:"w-4 h-4"})})]},t))}):r?e.jsx("p",{className:"text-gray-500 text-center py-6 italic",children:"Aucun créneau défini pour cette date"}):e.jsx("p",{className:"text-gray-500 text-center py-6 italic",children:"Sélectionnez une date dans le calendrier"}),!i&&r&&e.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Ajouter un créneau"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Début"}),e.jsx(x,{type:"time",value:l.start,onChange:s=>n(t=>({...t,start:s.target.value})),className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fin"}),e.jsx(x,{type:"time",value:l.end,onChange:s=>n(t=>({...t,end:s.target.value})),className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tarif (€/heure)"}),e.jsx(x,{type:"number",min:"0",step:"0.01",value:l.rate,onChange:s=>n(t=>({...t,rate:parseFloat(s.target.value)||0})),className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs(u,{onClick:M,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white",disabled:!l.start||!l.end||l.start>=l.end,children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Ajouter le créneau"]})]}),!i&&g&&e.jsxs(u,{onClick:()=>g(o),className:"w-full bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Sauvegarder les disponibilités"]})]})]})]})}export{K as A};
