import{r as j,j as e}from"./ui-BcXBiFQq.js";import{u as M}from"./useQuery-DMiG4v3Q.js";import{I as b,B as m,C as T,a as L,i as B,b as C,D as z,x as E,m as V,y as Z,n as $,o as H,L as g}from"./index-D4ZgD70Q.js";import{B as G}from"./badge-DKWoh_W7.js";import{C as U}from"./calendar-CSK9u1eq.js";import{A as q,a as J,b as K}from"./avatar-C2RoYrtN.js";import{T as Q}from"./textarea-EF-HVZxH.js";import{S as v,a as f,b as y,c as N,d as r}from"./select-CKETca9z.js";import{C as X}from"./categories-KhEpuZy7.js";import{F as Y}from"./filter-DwSSxOhL.js";import{C as R}from"./calendar-vmzahuyn.js";import{S as _}from"./star-B0F--Za4.js";import{M as W}from"./map-pin-DvokPh1Q.js";import{C as k}from"./clock-l0VaLv6c.js";import{M as ee}from"./message-circle-CIbB-rxq.js";import{P as se}from"./phone-CkhgdY-h.js";import"./vendor-D3F3s8fL.js";import"./en-US-oEpl4HuW.js";import"./chevron-left-C6MIVI31.js";import"./index-DIYLGAU4.js";function we(){const[l,O]=j.useState(new Date),[i,x]=j.useState({category:"all",location:"",maxRate:"",availability:"today"}),[S,u]=j.useState({isOpen:!1,provider:null,selectedTimeSlot:""}),[n,d]=j.useState({date:"",timeSlot:"",duration:"1",description:"",budget:""}),{data:ae=[]}=M({queryKey:["/api/providers/available"]}),h=new Date,w=new Date(h);w.setDate(h.getDate()+1);const p=[{id:"1",name:"Sophie Martin",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",category:"design",location:"Paris",rating:4.9,hourlyRate:65,skills:["UI/UX Design","Figma","Adobe Creative"],responseTime:"< 1h",completedProjects:127,availability:[{date:h.toISOString().split("T")[0],timeSlots:["09:00-12:00","14:00-17:00"]},{date:w.toISOString().split("T")[0],timeSlots:["10:00-16:00"]}],lastSeen:"2024-07-26T10:00:00Z",memberSince:"2023-01-15T00:00:00Z"},{id:"2",name:"Thomas Dubois",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",category:"development",location:"Lyon",rating:4.8,hourlyRate:80,skills:["React","Node.js","TypeScript"],responseTime:"< 30min",completedProjects:89,availability:[{date:h.toISOString().split("T")[0],timeSlots:["08:00-12:00","13:00-18:00"]}],lastSeen:"2024-07-25T15:30:00Z",memberSince:"2022-05-20T00:00:00Z"},{id:"3",name:"Marie Leroy",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face",category:"marketing",location:"Marseille",rating:4.7,hourlyRate:55,skills:["SEO","Google Ads","Analytics"],responseTime:"< 2h",completedProjects:156,availability:[{date:h.toISOString().split("T")[0],timeSlots:["09:00-13:00"]},{date:w.toISOString().split("T")[0],timeSlots:["14:00-18:00"]}],lastSeen:"2024-07-26T09:00:00Z",memberSince:"2023-11-01T00:00:00Z"}].filter(s=>{if(i.category!=="all"&&s.category!==i.category||i.location&&!s.location.toLowerCase().includes(i.location.toLowerCase())||i.maxRate&&s.hourlyRate>parseInt(i.maxRate))return!1;if(i.availability==="today"){const t=new Date().toISOString().split("T")[0];return s.availability.some(c=>c.date===t)}return!0}),D=(s,t)=>{if(!t||isNaN(t.getTime()))return[];const c=t.toISOString().split("T")[0];return s.availability.find(a=>a.date===c)?.timeSlots||[]},I=l&&!isNaN(l.getTime())?l.toISOString().split("T")[0]:new Date().toISOString().split("T")[0],F=p.filter(s=>s.availability.some(t=>t.date===I)),A=(s,t)=>{const c=l&&!isNaN(l.getTime())?l.toISOString().split("T")[0]:new Date().toISOString().split("T")[0];u({isOpen:!0,provider:s,selectedTimeSlot:""}),d({date:c,timeSlot:"",duration:"1",description:"",budget:""})},P=()=>{console.log("R√©servation:",{provider:S.provider?.id,...n}),u({isOpen:!1,provider:null,selectedTimeSlot:""})};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Prestataires Disponibles"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Trouvez des professionnels disponibles imm√©diatement avec leurs cr√©neaux et tarifs"})]}),e.jsxs("div",{className:"grid lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-white via-blue-50/30 to-purple-50/20 rounded-3xl shadow-xl border border-blue-100/50 p-6 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(Y,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Filtrer les prestataires"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Cat√©gorie"]}),e.jsxs(v,{value:i.category,onValueChange:s=>x(t=>({...t,category:s})),children:[e.jsx(f,{className:"bg-white/80 border-gray-200 hover:border-blue-400 transition-colors",children:e.jsx(y,{placeholder:"Toutes les cat√©gories"})}),e.jsxs(N,{children:[e.jsx(r,{value:"all",children:"Toutes"}),X.map(s=>e.jsx(r,{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Localisation"]}),e.jsx(b,{placeholder:"Ville, r√©gion...",value:i.location,onChange:s=>x(t=>({...t,location:s.target.value})),className:"bg-white/80 border-gray-200 hover:border-green-400 focus:border-green-500 transition-colors"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),"Tarif max/h"]}),e.jsx(b,{type:"number",placeholder:"‚Ç¨",value:i.maxRate,onChange:s=>x(t=>({...t,maxRate:s.target.value})),className:"bg-white/80 border-gray-200 hover:border-purple-400 focus:border-purple-500 transition-colors"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Disponibilit√©"]}),e.jsxs(v,{value:i.availability,onValueChange:s=>x(t=>({...t,availability:s})),children:[e.jsx(f,{className:"bg-white/80 border-gray-200 hover:border-orange-400 transition-colors",children:e.jsx(y,{})}),e.jsxs(N,{children:[e.jsx(r,{value:"today",children:"Aujourd'hui"}),e.jsx(r,{value:"week",children:"Cette semaine"}),e.jsx(r,{value:"all",children:"Toutes"})]})]})]}),e.jsx(m,{variant:"outline",className:"w-full border-gray-300 hover:bg-gray-50 transition-all duration-200 hover:shadow-md mt-4",onClick:()=>x({category:"all",location:"",maxRate:"",availability:"today"}),children:"üîÑ R√©initialiser les filtres"})]})]}),e.jsxs(T,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center",children:[e.jsx(R,{className:"w-5 h-5 mr-2"}),"S√©lectionner une date"]})}),e.jsxs(C,{children:[e.jsx(U,{mode:"single",selected:l,onSelect:s=>s&&O(s),disabled:s=>s<new Date(new Date().setHours(0,0,0,0)),className:"rounded-md border"}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[F.length," prestataire(s) disponible(s) le ",l.toLocaleDateString("fr-FR")]})]})]})]}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-2xl font-bold",children:[p.length," prestataires trouv√©s"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Tri√©s par disponibilit√© et note"})]}),e.jsx("div",{className:"space-y-6",children:p.map(s=>{const t=D(s,new Date),c=D(s,l);return e.jsx(T,{className:"hover:shadow-lg transition-shadow",children:e.jsx(C,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4 mb-4 lg:mb-0",children:[e.jsxs(q,{className:"w-16 h-16",children:[e.jsx(J,{src:s.avatar,alt:s.name}),e.jsx(K,{children:s.name.split(" ").map(a=>a[0]).join("")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-sm font-medium ml-1",children:s.rating})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"w-4 h-4 mr-1"}),s.location]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),"R√©pond en ",s.responseTime]}),e.jsxs("div",{children:[s.completedProjects," projets"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.skills.map(a=>e.jsx(G,{variant:"secondary",className:"text-xs",children:a},a))}),e.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-2",children:[s.hourlyRate,"‚Ç¨/h"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Dernier vu: ",s.lastSeen?new Date(s.lastSeen).toLocaleDateString():"R√©cemment"]}),e.jsx("br",{}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Membre depuis ",s.memberSince?new Date(s.memberSince).getFullYear():"2024"]})]})]}),e.jsxs("div",{className:"lg:text-right space-y-3",children:[t.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-green-600 mb-1",children:"‚úÖ Disponible aujourd'hui"}),e.jsx("div",{className:"text-xs text-gray-600",children:t.join(", ")})]}),c.length>0&&l.toDateString()!==new Date().toDateString()&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-blue-600 mb-1",children:["üìÖ Disponible le ",l.toLocaleDateString("fr-FR")]}),e.jsx("div",{className:"text-xs text-gray-600",children:c.join(", ")})]}),e.jsxs("div",{className:"flex space-x-2 flex-wrap",children:[e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>window.location.href=`/messages?provider=${s.id}`,children:[e.jsx(ee,{className:"w-4 h-4 mr-1"}),"Message"]}),e.jsxs(m,{size:"sm",variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-50",onClick:()=>window.open(`tel:+33${Math.floor(Math.random()*1e9)}`,"_self"),children:[e.jsx(se,{className:"w-4 h-4 mr-1"}),"Contacter"]}),e.jsxs(z,{open:S.isOpen&&S.provider?.id===s.id,onOpenChange:a=>!a&&u({isOpen:!1,provider:null,selectedTimeSlot:""}),children:[e.jsx(E,{asChild:!0,children:e.jsxs(m,{size:"sm",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white",onClick:()=>A(s),children:[e.jsx(R,{className:"w-4 h-4 mr-1"}),"R√©server"]})}),e.jsxs(V,{className:"max-w-md",children:[e.jsxs(Z,{children:[e.jsx($,{children:"R√©server un cr√©neau"}),e.jsxs(H,{children:["R√©servez un cr√©neau avec ",s.name]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"date",children:"Date"}),e.jsx(b,{id:"date",type:"date",value:n.date,onChange:a=>d(o=>({...o,date:a.target.value})),min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"timeSlot",children:"Cr√©neaux disponibles"}),e.jsxs(v,{value:n.timeSlot,onValueChange:a=>d(o=>({...o,timeSlot:a})),children:[e.jsx(f,{children:e.jsx(y,{placeholder:"S√©lectionner un cr√©neau"})}),e.jsx(N,{children:n.date&&D(s,new Date(n.date)).map(a=>e.jsx(r,{value:a,children:a},a))})]})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"duration",children:"Dur√©e (heures)"}),e.jsxs(v,{value:n.duration,onValueChange:a=>d(o=>({...o,duration:a})),children:[e.jsx(f,{children:e.jsx(y,{})}),e.jsxs(N,{children:[e.jsx(r,{value:"1",children:"1 heure"}),e.jsx(r,{value:"2",children:"2 heures"}),e.jsx(r,{value:"4",children:"4 heures"}),e.jsx(r,{value:"8",children:"Journ√©e compl√®te"})]})]})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"budget",children:"Budget estim√©"}),e.jsx(b,{id:"budget",type:"number",placeholder:`${s.hourlyRate*parseInt(n.duration)}‚Ç¨`,value:n.budget,onChange:a=>d(o=>({...o,budget:a.target.value}))})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"description",children:"Description du projet"}),e.jsx(Q,{id:"description",placeholder:"D√©crivez bri√®vement votre projet...",value:n.description,onChange:a=>d(o=>({...o,description:a.target.value}))})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(m,{variant:"outline",className:"flex-1",onClick:()=>u({isOpen:!1,provider:null,selectedTimeSlot:""}),children:"Annuler"}),e.jsx(m,{className:"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",onClick:P,children:"Confirmer la r√©servation"})]})]})]})]})]})]})]})})},s.id)})}),p.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(k,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun prestataire disponible"}),e.jsx("p",{className:"text-gray-600",children:"Essayez de modifier vos crit√®res de recherche"})]})]})]})]})}export{we as default};
